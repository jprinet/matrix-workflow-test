name: Matrix Test

on: [ workflow_dispatch ]

jobs:
   test_matrix-linux:
     runs-on: ubuntu-latest
     strategy:
       fail-fast: false
       matrix:
         a: [ a1, a2, a3 ]
         b: [ b1, b2, b3 ]
     steps:
       - name: Dump unique ID
         run: |
           echo "experiment-1-receipt-${{ github.job }}${{ (strategy.job-index && format('-{0}', strategy.job-index)) || '' }}"

   test_matrix-windows:
     runs-on: windows-latest
     strategy:
       fail-fast: false
       matrix:
         a: [ a1, a2, a3 ]
         b: [ b1, b2, b3 ]
     steps:
       - name: Dump unique ID
         run: |
           echo "experiment-1-receipt-${{ github.job }}${{ (strategy.job-index && format('-{0}', strategy.job-index)) || '' }}"

   test_matrix-macos:
     runs-on: macos-latest
     strategy:
       fail-fast: false
       matrix:
         a: [ a1, a2, a3 ]
         b: [ b1, b2, b3 ]
     steps:
       - name: Dump unique ID
         run: |
           echo "experiment-1-receipt-${{ github.job }}${{ (strategy.job-index && format('-{0}', strategy.job-index)) || '' }}"

   test_normal:
    runs-on: ubuntu-latest
    steps:
      - name: Dump unique ID
        run: |
          echo "experiment-1-receipt-${{ github.job }}${{ (strategy.job-index && format('-{0}', strategy.job-index)) || '' }}"

